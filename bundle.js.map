{"version":3,"sources":["webpack:///webpack/bootstrap 45f6b728801789c0e886","webpack:///./lib/battle_tetris.js","webpack:///./~/modal/modal.js","webpack:///./~/events/events.js","webpack:///./~/modal/modal-template.js","webpack:///./~/jade/lib/runtime.js","webpack:///fs (ignored)","webpack:///./lib/tetris.js","webpack:///./lib/board.js","webpack:///./lib/tetrominos.js"],"names":["Tetrominos","BattleTetris","player","$hook","keyBindings","bricks","dropBlocksOnOpponent","opponent","registerListener","addLines","bind","cb","numBricks","brickLocation","i","randIdx","Math","floor","random","length","push","row","col","tetromino","brick","rotation","splice","movedBricks","move","numLines","removeCurrentTetromino","board","pushRow","gridWidth","setBlock","gridHeight","placeCurrentTetromino","setTimeout","currentTetromino","render","title","content","buttons","text","event","keyCodes","on","window","location","reload","newlyClearedRows","clearRows","clearedRows","updateDropInterval","notifyListener","resetCurrentTetromino","play","dropInterval","document","addEventListener","rightGame","$","leftGame","UP","LEFT","RIGHT","DOWN","DROP","addOpponent","playGames","Tetris","handleKeypress","nextTetromino","randomTetromino","tetrominos","o","j","l","z","s","t","eachBlock","x","y","undefined","removeTetromino","placeTetromino","isOccupied","rotateTetromino","dRow","dCol","newRow","newCol","moved","removedRows","complete","blockAt","string","removeRow","e","keyCode","preventDefault","rotateCurrentTetromino","drop","alert","Board","grid","initializeGrid","Array","callback","tetrominoBlocks","rotations","currBit","occupied","testOccupation","Boolean","unshift","rowLocation","shift","rowString","console","log","html","$tile","addClass","color","css","append"],"mappings":"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8B,yBAAyB;AACvD,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,gBAAgB;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA,uBAAsB,aAAa;AACnC;AACA;AACA;AACA;AACA,MAAK;AACL,0BAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,WAAU,aAAa;AACvB,cAAa,YAAY;;AAEzB;AACA;;AAEA;AACA,qBAAoB,aAAa;;AAEjC;AACA;AACA,0BAAyB,uBAAuB;AAChD,4BAA2B,gBAAgB;AAC3C,MAAK;AACL;;AAEA;;AAEA;;AAEA;AACA;;;;;;;AChNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AC7SA,mCAA0C;AAC1C,6BAA4B,gCAAgC,mCAAmC;AAC/F;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;AAEA,+CAA8C,cAAc;AAC5D;;AAEA;AACA,iBAAgB,oDAAoD,GAAG,aAAa;AACpF;AACA;AACA;AACA;AACA,iBAAgB,kCAAkC,GAAG,aAAa;AAClE;AACA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA,iBAAgB,oDAAoD,GAAG,aAAa;AACpF;AACA;AACA;AACA;AACA,iBAAgB,kCAAkC,GAAG,aAAa;AAClE;AACA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,E;;;;;;AC1DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,EAAE;AACb,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,EAAE;AACb,aAAY;AACZ;AACA;AACA;AACA;AACA,gFAA+E,iBAAiB,EAAE;AAClG;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,gBAAgB;AAC3B,aAAY;AACZ;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,MAAK,SAAS;AACd,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,wEAAuE;AACvE,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA,oBAAm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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 45f6b728801789c0e886\n **/","import modal from 'modal';\n\nimport Tetris from './tetris.js';\nimport * as Tetrominos from './tetrominos';\n\nclass BattleTetris extends Tetris {\n  constructor(player, $hook, keyBindings) {\n    super($hook, keyBindings);\n    this.player = player;\n    this.bricks = [];\n    this.dropBlocksOnOpponent = null;\n  }\n\n  /**\n   *  Hold pointer to opponent BattleTetris instance\n   */\n  addOpponent(opponent) {\n    this.opponent = opponent;\n    // this.registerListener(this.opponent.initializeBricks.bind(opponent));\n    this.registerListener(this.opponent.addLines.bind(opponent));\n  }\n\n  /**\n   * accept callback from opponent (Observer design pattern)\n   */\n  registerListener(cb) {\n    this.dropBlocksOnOpponent = cb;\n  }\n\n  /**\n   * call callback on opponent to drop blocks on their board\n   */\n  notifyListener(numBricks) {\n    this.dropBlocksOnOpponent(numBricks);\n  }\n\n  /**\n   * Add numBricks bricks to this.bricks array\n   */\n  initializeBricks(numBricks) {\n    const brickLocation = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\n    for (let i = 0; i < numBricks; i++) {\n      const randIdx = Math.floor(Math.random()*(brickLocation.length + 1));\n      this.bricks.push({\n        row: 0,\n        col: brickLocation[randIdx],\n        tetromino: Tetrominos.brick,\n        rotation: 0\n      });\n      brickLocation.splice(randIdx, 1);\n    }\n  }\n\n  /**\n   * Drop all unclearable bricks one tile if possible\n   */\n  dropBricks() {\n    const movedBricks = [];\n    for (let i = 0; i < this.bricks.length; i++) {\n      const brick = this.bricks[i];\n      if (this.move(1, 0, brick)) {\n        // release bricks that have fallen as far as possible\n        movedBricks.push(brick);\n      }\n    }\n    this.bricks = movedBricks;\n  }\n\n  /**\n   * Add numLines lines of unclearable bricks\n   */\n  addLines(numLines) {\n    this.removeCurrentTetromino();\n    for (let i = 0; i < numLines; i++) {\n      this.board.pushRow();\n      for (let col = 0; col < this.board.gridWidth; col++) {\n        this.board.setBlock(this.board.gridHeight - 1, col, Tetrominos.brick);\n      }\n    }\n    this.placeCurrentTetromino();\n  }\n\n  /**\n   * Main gameplay loop - overwrite play() in Parent Class to accommodate\n   * brick functionality\n   */\n  play() {\n    setTimeout(function () {\n      // this.dropBricks();\n\n      if (!this.move(1, 0)) {\n        if (this.currentTetromino.row === 0) {\n          this.board.render();\n          modal(\n            { title: `${this.player} loses!`\n            , content: 'Rematch?'\n            , buttons:\n              [\n                { text: 'Play Again', event: 'play', keyCodes: [ 13 ] }\n              ]\n            })\n          .on('play', () => window.location.reload() );\n          return;\n        }\n        const newlyClearedRows = this.clearRows();\n        this.clearedRows += newlyClearedRows;\n        this.updateDropInterval();\n        // drop bricks on opponent if rows cleared\n        if (newlyClearedRows) this.notifyListener(newlyClearedRows);\n        this.resetCurrentTetromino();\n      }\n      this.board.render();\n      this.play();\n    }.bind(this), this.dropInterval);\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  const rightGame = new BattleTetris(\"Player 2\", $('#right-board'));\n  const leftGame = new BattleTetris(\"Player 1\", $('#left-board'), {\n    UP: 87,\n    LEFT: 65,\n    RIGHT: 68,\n    DOWN: 83,\n    DROP: 81\n  });\n  leftGame.addOpponent(rightGame);\n  rightGame.addOpponent(leftGame);\n  leftGame.board.render();\n  rightGame.board.render();\n\n  const playGames = () => {\n    rightGame.play();\n    leftGame.play();\n  };\n\n  modal(\n    { title: 'Battle Tetris!'\n    , content: 'Defeat your opponent by clearing lines on your board.'\n    , buttons:\n      [\n        { text: 'Play', event: 'play', keyCodes: [ 13 ] }\n      ]\n    })\n  .on('play', playGames);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/battle_tetris.js\n **/","module.exports = modal\n\n/*\n * This module provides generic modal dialog functionality\n * for blocking the UI and obtaining user input.\n *\n * Usage:\n *\n *   modal([options])\n *     [.on('event')]...\n *\n *   options:\n *     - title (string)\n *     - content (jQuery DOM element / raw string)\n *     - buttons (array)\n *       - text (string) the button text\n *       - event (string) the event name to fire when the button is clicked\n *       - className (string) the className to apply to the button\n *       - iconClassName (string) adds an `i` element before button text with the given class(es)\n *       - keyCodes ([numbers]) the keycodes of shortcut keys for the button\n *     - clickOutsideToClose (boolean) whether a click event outside of the modal should close it\n *     - clickOutsideEvent (string) the name of the event to be triggered on clicks outside of the modal\n *     - className (string) optional class to apply to the modal element\n *     - removeMethod (string) which jQuery method to remove the modal contents with (default: remove)\n *         This is useful when you want to append the contents to the DOM again later. In which case\n *         set this to 'detach' so that bound event handlers aren't removed.\n *\n *  Events will be fired on the modal according to which button is clicked.\n *  Defaults are confirm/cancel, but these can be overriden in your options.\n *\n *  Example:\n *\n *   modal(\n *     { title: 'Delete object'\n *     , content: 'Are you sure you want to delete this object?'\n *     , buttons:\n *       [ { text: 'Donâ€™t delete', event: 'cancel' }\n *       , { text: 'Delete', event: 'confirm', className: 'button-danger', iconClassName: 'icon-delete' }\n *       ]\n *     })\n *     .on('confirm', deleteItem)\n */\n\nvar Emitter = require('events').EventEmitter\n  , template = require('./modal-template')\n\n  , defaults =\n    { title: 'Are you sure?'\n    , content: 'Please confirm this action.'\n    , buttons:\n      [ { text: 'Cancel', event: 'cancel', className: '', iconClassName: '', keyCodes: [ 27 ] }\n      , { text: 'Confirm', event: 'confirm', className: '', iconClassName: '' }\n      ]\n    , clickOutsideToClose: true\n    , clickOutsideEvent: 'cancel'\n    , className: ''\n    , removeMethod: 'remove'\n    , fx: true // used for testing\n    }\n\nfunction modal(options) {\n  return new Modal($.extend({}, defaults, options))\n}\n\nfunction Modal(settings) {\n\n  Emitter.call(this)\n\n  var el = $(template(settings))\n    , modal = el.find('.js-modal')\n    , content = el.find('.js-content')\n    , buttons = el.find('.js-button')\n    , keys = {}\n    , transitionFn = $.fn.transition ? 'transition' : 'animate'\n\n  if (typeof settings.content === 'string') {\n    content.append($('<p/>', { text: settings.content }))\n  } else {\n    content.append(settings.content)\n  }\n\n  modal.addClass(settings.className)\n\n  // Cache the button shortcut keycodes\n  $.each(settings.buttons, function (i, button) {\n    if (!button.keyCodes) return\n    $.each(button.keyCodes, function (n, keyCode) {\n      keys[keyCode + ''] = i\n    })\n  })\n\n  /*\n   * Reposition the modal in the middle of the screen\n   */\n  function centre() {\n    if (modal.outerHeight(true) < $(window).height()) {\n      var diff = $(window).height() - modal.outerHeight(true)\n      modal.css({ top: diff / 2 })\n    }\n  }\n\n  /*\n   * Remove a modal from the DOM\n   * and tear down its related events\n   */\n  var removeModal = $.proxy(function () {\n    var listenersWithCallback = 0\n\n    $.each(this.listeners('beforeClose'), function(i, fn) {\n      if (isFunctionWithArguments(fn)) {\n        listenersWithCallback++\n      }\n    })\n\n    if (listenersWithCallback > 0) {\n      var currentCallsCount = 0\n        , performClose = function() {\n          if (++currentCallsCount === listenersWithCallback) {\n            performRemoveModal()\n          }\n        }\n      this.emit('beforeClose', performClose)\n    } else {\n      this.emit('beforeClose')\n      performRemoveModal()\n    }\n  }, this)\n\n  function isFunctionWithArguments(fn) {\n    return fn.length > 0\n  }\n\n  var performRemoveModal = $.proxy(function () {\n    el[transitionFn]({ opacity: 0 }, settings.fx ? 200 : 0)\n    // Do setTimeout rather than using the transition\n    // callback as it potentially fails to get called in IE10\n    setTimeout(function () {\n      el[settings.removeMethod]()\n    }, settings.fx ? 200 : 0)\n    modal[transitionFn]({ top: $(window).height() }, settings.fx ? 200 : 0)\n    this.emit('close')\n    this.removeAllListeners()\n    $(document).off('keyup', keyup)\n    $(window).off('resize', centre)\n  }, this)\n\n  // Expose so you can control externally\n  this.close = function() {\n    removeModal()\n  }\n\n  // Expose so you can recentre externally\n  this.centre = centre\n\n  /*\n   * Respond to a key event\n   */\n  var keyup = $.proxy(function (e) {\n    var button = keys[e.keyCode + '']\n    if (typeof button !== 'undefined') {\n      this.emit(settings.buttons[button].event)\n      removeModal()\n    }\n  }, this)\n\n  // Assign button event handlers\n  buttons.each($.proxy(function (i, el) {\n    $(el).on('click', $.proxy(function () {\n      this.emit(settings.buttons[i].event)\n      removeModal()\n    }, this))\n  }, this))\n\n  $(document).on('keyup', keyup)\n\n  // Listen for clicks outside the modal\n  el.on('click', $.proxy(function (e) {\n    if ($(e.target).is(el)) {\n      this.emit(settings.clickOutsideEvent)\n      // Clicks outside should close?\n      if (settings.clickOutsideToClose) {\n        removeModal()\n      }\n    }\n  }, this))\n\n  // Set initial styles\n  el.css({ opacity: 0 })\n  modal.css({ top: '0%' })\n\n  // Append to DOM\n  $('body').append(el)\n\n  // transition in\n  el[transitionFn]({ opacity: 1 }, settings.fx ? 100 : 0)\n\n  if (modal.outerHeight(true) < $(window).height()) {\n    var diff = $(window).height() - modal.outerHeight(true)\n    modal[transitionFn]({ top: (diff / 2) + 10 }, settings.fx ? 200 : 0, function () {\n      modal[transitionFn]({ top: diff / 2 }, settings.fx ? 150 : 0)\n    })\n  }\n\n  $(window).on('resize', centre)\n\n}\n\n// Be an emitter\nModal.prototype = Emitter.prototype\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/modal/modal.js\n ** module id = 1\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/events/events.js\n ** module id = 2\n ** module chunks = 0\n **/","var jade = require('jade/lib/runtime.js');module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"modal-overlay\"><div class=\"modal-content js-modal\">');\nif ( (title))\n{\nbuf.push('<h1 class=\"modal-title\">' + escape((interp = title) == null ? '' : interp) + '</h1>');\n}\nbuf.push('<div class=\"js-content\"></div>');\nif ( (buttons.length))\n{\nbuf.push('<div class=\"modal-controls\">');\n// iterate buttons\n;(function(){\n  if ('number' == typeof buttons.length) {\n\n    for (var $index = 0, $$l = buttons.length; $index < $$l; $index++) {\n      var button = buttons[$index];\n\nbuf.push('<button');\nbuf.push(attrs({ \"class\": ('js-button') + ' ' + (button.className) }, {\"class\":true}));\nbuf.push('>');\nif ( button.iconClassName)\n{\nbuf.push('<i');\nbuf.push(attrs({ \"class\": (button.iconClassName) }, {\"class\":true}));\nbuf.push('></i> ');\n}\nbuf.push('' + escape((interp = button.text) == null ? '' : interp) + '</button>');\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in buttons) {\n      $$l++;      var button = buttons[$index];\n\nbuf.push('<button');\nbuf.push(attrs({ \"class\": ('js-button') + ' ' + (button.className) }, {\"class\":true}));\nbuf.push('>');\nif ( button.iconClassName)\n{\nbuf.push('<i');\nbuf.push(attrs({ \"class\": (button.iconClassName) }, {\"class\":true}));\nbuf.push('></i> ');\n}\nbuf.push('' + escape((interp = button.text) == null ? '' : interp) + '</button>');\n    }\n\n  }\n}).call(this);\n\nbuf.push('</div>');\n}\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/modal/modal-template.js\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\n\n/**\n * Merge two attribute objects giving precedence\n * to values in object `b`. Classes are special-cased\n * allowing for arrays and merging/joining appropriately\n * resulting in a string.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api private\n */\n\nexports.merge = function merge(a, b) {\n  if (arguments.length === 1) {\n    var attrs = a[0];\n    for (var i = 1; i < a.length; i++) {\n      attrs = merge(attrs, a[i]);\n    }\n    return attrs;\n  }\n  var ac = a['class'];\n  var bc = b['class'];\n\n  if (ac || bc) {\n    ac = ac || [];\n    bc = bc || [];\n    if (!Array.isArray(ac)) ac = [ac];\n    if (!Array.isArray(bc)) bc = [bc];\n    a['class'] = ac.concat(bc).filter(nulls);\n  }\n\n  for (var key in b) {\n    if (key != 'class') {\n      a[key] = b[key];\n    }\n  }\n\n  return a;\n};\n\n/**\n * Filter null `val`s.\n *\n * @param {*} val\n * @return {Boolean}\n * @api private\n */\n\nfunction nulls(val) {\n  return val != null && val !== '';\n}\n\n/**\n * join array as classes.\n *\n * @param {*} val\n * @return {String}\n */\nexports.joinClasses = joinClasses;\nfunction joinClasses(val) {\n  return (Array.isArray(val) ? val.map(joinClasses) :\n    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :\n    [val]).filter(nulls).join(' ');\n}\n\n/**\n * Render the given classes.\n *\n * @param {Array} classes\n * @param {Array.<Boolean>} escaped\n * @return {String}\n */\nexports.cls = function cls(classes, escaped) {\n  var buf = [];\n  for (var i = 0; i < classes.length; i++) {\n    if (escaped && escaped[i]) {\n      buf.push(exports.escape(joinClasses([classes[i]])));\n    } else {\n      buf.push(joinClasses(classes[i]));\n    }\n  }\n  var text = joinClasses(buf);\n  if (text.length) {\n    return ' class=\"' + text + '\"';\n  } else {\n    return '';\n  }\n};\n\n\nexports.style = function (val) {\n  if (val && typeof val === 'object') {\n    return Object.keys(val).map(function (style) {\n      return style + ':' + val[style];\n    }).join(';');\n  } else {\n    return val;\n  }\n};\n/**\n * Render the given attribute.\n *\n * @param {String} key\n * @param {String} val\n * @param {Boolean} escaped\n * @param {Boolean} terse\n * @return {String}\n */\nexports.attr = function attr(key, val, escaped, terse) {\n  if (key === 'style') {\n    val = exports.style(val);\n  }\n  if ('boolean' == typeof val || null == val) {\n    if (val) {\n      return ' ' + (terse ? key : key + '=\"' + key + '\"');\n    } else {\n      return '';\n    }\n  } else if (0 == key.indexOf('data') && 'string' != typeof val) {\n    if (JSON.stringify(val).indexOf('&') !== -1) {\n      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +\n                   'will be escaped to `&amp;`');\n    };\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will eliminate the double quotes around dates in ' +\n                   'ISO form after 2.0.0');\n    }\n    return ' ' + key + \"='\" + JSON.stringify(val).replace(/'/g, '&apos;') + \"'\";\n  } else if (escaped) {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + exports.escape(val) + '\"';\n  } else {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + val + '\"';\n  }\n};\n\n/**\n * Render the given attributes object.\n *\n * @param {Object} obj\n * @param {Object} escaped\n * @return {String}\n */\nexports.attrs = function attrs(obj, terse){\n  var buf = [];\n\n  var keys = Object.keys(obj);\n\n  if (keys.length) {\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i]\n        , val = obj[key];\n\n      if ('class' == key) {\n        if (val = joinClasses(val)) {\n          buf.push(' ' + key + '=\"' + val + '\"');\n        }\n      } else {\n        buf.push(exports.attr(key, val, false, terse));\n      }\n    }\n  }\n\n  return buf.join('');\n};\n\n/**\n * Escape the given string of `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nvar jade_encode_html_rules = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\nvar jade_match_html = /[&<>\"]/g;\n\nfunction jade_encode_char(c) {\n  return jade_encode_html_rules[c] || c;\n}\n\nexports.escape = jade_escape;\nfunction jade_escape(html){\n  var result = String(html).replace(jade_match_html, jade_encode_char);\n  if (result === '' + html) return html;\n  else return result;\n};\n\n/**\n * Re-throw the given `err` in context to the\n * the jade in `filename` at the given `lineno`.\n *\n * @param {Error} err\n * @param {String} filename\n * @param {String} lineno\n * @api private\n */\n\nexports.rethrow = function rethrow(err, filename, lineno, str){\n  if (!(err instanceof Error)) throw err;\n  if ((typeof window != 'undefined' || !filename) && !str) {\n    err.message += ' on line ' + lineno;\n    throw err;\n  }\n  try {\n    str = str || require('fs').readFileSync(filename, 'utf8')\n  } catch (ex) {\n    rethrow(err, null, lineno)\n  }\n  var context = 3\n    , lines = str.split('\\n')\n    , start = Math.max(lineno - context, 0)\n    , end = Math.min(lines.length, lineno + context);\n\n  // Error context\n  var context = lines.slice(start, end).map(function(line, i){\n    var curr = i + start + 1;\n    return (curr == lineno ? '  > ' : '    ')\n      + curr\n      + '| '\n      + line;\n  }).join('\\n');\n\n  // Alter exception message\n  err.path = filename;\n  err.message = (filename || 'Jade') + ':' + lineno\n    + '\\n' + context + '\\n\\n' + err.message;\n  throw err;\n};\n\nexports.DebugItem = function DebugItem(lineno, filename) {\n  this.lineno = lineno;\n  this.filename = filename;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jade/lib/runtime.js\n ** module id = 4\n ** module chunks = 0\n **/","/* (ignored) */\n\n\n/*****************\n ** WEBPACK FOOTER\n ** fs (ignored)\n ** module id = 5\n ** module chunks = 0\n **/","import Board from './board';\nimport * as Tetrominos from './tetrominos';\n\nclass Tetris {\n  constructor($hook, keyBindings) {\n    this.$hook = $hook; // root div in index.html\n    this.board = new Board($hook);\n    this.dropInterval = 500; //milliseconds\n    this.clearedRows = 0;\n    this.resetCurrentTetromino();\n    this.keyBindings = keyBindings || {\n      UP: 38,\n      LEFT: 37,\n      RIGHT: 39,\n      DOWN: 40,\n      DROP: 191\n    };\n    document.addEventListener('keydown', this.handleKeypress.bind(this), false);\n  }\n\n  resetCurrentTetromino() {\n    this.currentTetromino = {\n      row: 0,\n      col: 4,\n      tetromino: this.nextTetromino || this.randomTetromino(),\n      rotation: 0\n    };\n    this.nextTetromino = this.randomTetromino();\n  }\n\n  randomTetromino() {\n    const tetrominos = [Tetrominos.o, Tetrominos.i, Tetrominos.j, Tetrominos.l,\n      Tetrominos.z, Tetrominos.s, Tetrominos.t];\n    return tetrominos[Math.floor(Math.random() * tetrominos.length)];\n  }\n\n  removeTetromino(tetromino) {\n    this.board.eachBlock(\n      tetromino.row,\n      tetromino.col,\n      tetromino.tetromino,\n      tetromino.rotation,\n      function (x, y) {\n        this.board.setBlock(x, y, undefined);\n      }.bind(this)\n    );\n  }\n\n  removeCurrentTetromino() {\n    this.removeTetromino(this.currentTetromino);\n  }\n\n  placeTetromino(tetromino) {\n    this.board.eachBlock(\n      tetromino.row,\n      tetromino.col,\n      tetromino.tetromino,\n      tetromino.rotation,\n      function(x, y) {\n        this.board.setBlock(x, y, tetromino.tetromino);\n      }.bind(this)\n    );\n  }\n\n  placeCurrentTetromino() {\n    this.placeTetromino(this.currentTetromino);\n  }\n\n  rotateTetromino(tetromino) {\n    this.removeTetromino(tetromino);\n    if (!this.board.isOccupied(\n      tetromino.row,\n      tetromino.col,\n      tetromino.tetromino,\n      (tetromino.rotation + 1) % 4\n    )) {\n      tetromino.rotation =\n      (tetromino.rotation + 1) % 4;\n    }\n\n    this.placeTetromino(tetromino);\n  }\n\n  rotateCurrentTetromino() {\n    this.rotateTetromino(this.currentTetromino);\n  }\n\n  move(dRow, dCol, tetromino) {\n    if (!tetromino) tetromino = this.currentTetromino;\n\n    const newRow = tetromino.row + dRow;\n    const newCol = tetromino.col + dCol;\n    this.removeTetromino(tetromino);\n    let moved = false;\n\n    if (!this.board.isOccupied(newRow, newCol, tetromino.tetromino, tetromino.rotation)) {\n      tetromino.row = newRow;\n      tetromino.col = newCol;\n      moved = true;\n    }\n\n    this.placeTetromino(tetromino);\n    return moved;\n  }\n\n  /**\n   * Drop current piece as far as possible\n   */\n  drop() {\n    while (this.move(1, 0)) {\n      continue;\n    }\n  }\n\n  /**\n   * Remove completed rows from board, and update dropinterval as necessary\n   * Return number of rows cleared\n   */\n  clearRows() {\n    let removedRows = 0;\n    for (let row = 0; row < this.board.gridHeight; row++) {\n      let complete = true;\n      for (let col = 0; col < this.board.gridWidth; col++) {\n        if (\n          !this.board.blockAt(row, col) ||\n          this.board.blockAt(row,col).string === 'B' // brick piece\n        ){\n          complete = false;\n          break;\n        }\n      }\n      if (complete) {\n        this.board.removeRow(row);\n        removedRows++;\n        row--;\n      }\n    }\n    return removedRows;\n  }\n\n  /**\n   * Increase game speed as more lines are cleared\n   */\n  updateDropInterval() {\n    if (this.dropInterval > 100) {\n      this.dropInterval = 500 - (10 * Math.floor(this.clearedRows / 10));\n    }\n  }\n\n  /**\n   * Handle user input according to given keyBindings\n   */\n  handleKeypress(e) {\n    switch (e.keyCode) {\n      case this.keyBindings.UP:\n        e.preventDefault();\n        this.rotateCurrentTetromino();\n        break;\n      case this.keyBindings.LEFT:\n        e.preventDefault();\n        this.move(0, -1);\n        break;\n      case this.keyBindings.RIGHT:\n        e.preventDefault();\n        this.move(0, 1);\n        break;\n      case this.keyBindings.DOWN:\n        e.preventDefault();\n        this.move(1, 0);\n        break;\n      case this.keyBindings.DROP:\n        e.preventDefault();\n        this.drop();\n        break;\n    }\n    this.board.render();\n  }\n\n  /**\n   * Main gameplay loop\n   */\n  play() {\n    setTimeout(function () {\n      if (!this.move(1, 0)) {\n        if (this.currentTetromino.row === 0) {\n          alert ('you lose!');\n          return;\n        }\n        this.clearRows();\n        this.resetCurrentTetromino();\n      }\n      this.play();\n    }.bind(this), this.dropInterval);\n    this.board.render();\n  }\n}\n\n\nexport default Tetris;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/tetris.js\n **/","class Board {\n  constructor($hook) {\n    this.$hook = $hook; // root div in index.html\n    this.gridHeight = 20;\n    this.gridWidth = 10;\n    this.grid = this.initializeGrid();\n  }\n\n  /**\n   * initialize empty game grid\n   */\n  initializeGrid() {\n    const grid = [];\n    for (let i = 0; i < this.gridHeight; i++) {\n      grid.push(new Array(this.gridWidth));\n    }\n    return grid;\n  }\n\n  /**\n   * return the tetromino object at row, col (undefined if no tetromino)\n   */\n  blockAt(row, col) {\n    return this.grid[row][col];\n  }\n\n  /**\n   * set block at row, col to have the properties of the tetromino containing the block\n   */\n  setBlock(row, col, tetromino) {\n    this.grid[row][col] = tetromino;\n  }\n\n  /**\n   * set block at row, col to undefined\n   */\n  clearBlock(row, col) {\n    this.grid[row][col] = undefined;\n  }\n\n  /**\n   * perform callback function on each position of grid occupied by\n   * given tetromino located at (row, col) with given rotation.\n   */\n  eachBlock(row, col, tetromino, rotation, callback) {\n    let dRow = 0, dCol = 0;\n    let tetrominoBlocks = tetromino.rotations[rotation];\n    for (let currBit = 0b1000000000000000; currBit > 0; currBit >>= 1) {\n      if (currBit & tetrominoBlocks) {\n        callback(row + dRow, col + dCol);\n      }\n      dCol++;\n      if (dCol > 3) {\n        dCol = 0;\n        dRow++;\n      }\n    }\n  }\n  //\n  // /**\n  //  * Place tetromino at row, col\n  //  */\n  // placeTetromino(tetromino, row, col) {\n  //\n  // }\n\n  /**\n   *  Return true if any block tetromino of given rotation located at (row, col)\n   *  will take a space already occupied on the board.\n   */\n  isOccupied(row, col, tetromino, rotation) {\n    let occupied = false;\n\n    const testOccupation = function (i, j) {\n      if (i < 0 || j < 0 ||\n        i >= this.gridHeight ||\n        j >= this.gridWidth ||\n        Boolean(this.blockAt(i, j))\n      ){\n        occupied = true;\n      }\n    }.bind(this);\n\n    this.eachBlock(row, col, tetromino, rotation, testOccupation);\n\n    return occupied;\n  }\n\n  /**\n   * Delete row from grid, adding empty row to top of grid\n   */\n  removeRow(row) {\n    this.grid.splice(row, 1);\n    this.grid.unshift(new Array(this.gridWidth));\n  }\n\n  /**\n   * Adds enpty row at bottom of grid, removing top row to make space\n   */\n   pushRow(rowLocation) {\n     this.grid.shift();\n     this.grid.push(new Array(this.gridWidth));\n   }\n\n  /**\n   * Display this.grid in console for debugging purposes\n   */\n  printGridToConsole() {\n    for (let row = 0; row < this.gridHeight; row++) {\n      let rowString = '';\n      for (let col = 0; col < this.gridWidth; col++) {\n        rowString += this.blockAt(row, col) ? this.grid[row][col].string : \"-\";\n        rowString += \" \";\n      }\n      console.log(rowString);\n    }\n  }\n\n  /**\n   * Update DOM to reflect current board state\n   */\n  render() {\n    this.$hook.html(\"\");\n    for (let row = 0; row < this.gridHeight; row++) {\n      for (let col = 0; col < this.gridWidth; col++) {\n        const $tile = $(`<div id=r-${row}-c-${col}></div>`);\n        $tile.addClass('tile');\n        // let color = 'rgb(255, 255, 255)';\n        if (this.blockAt(row, col)) {\n          let color = this.blockAt(row, col).color;\n          $tile.css('background-color', color);\n          $tile.addClass('block');\n          $tile.addClass(this.blockAt(row, col).string);\n        }\n        this.$hook.append($tile);\n      }\n    }\n  }\n}\n\nexport default Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/board.js\n **/","/**\n * Tetrominos will be represented as 16-bit binary numbers, with each\n * bit representing a position on a 4x4 square grid:\n *  0  1  2  3\n *  4  5  6  7\n *  8  9 10 11\n * 12 13 14 15\n *\n * The o piece, for example, takes up sites 0, 1, 4, and 5, and can\n * therefore be represented by the binary number 0b1100 1100 0000 0000.\n *\n * In this way all of the pieces and all of their rotations can be\n * represented with very litte overhead. Additionally, this allows for\n * fast bit-level operations when iterating over all blocks in the game\n * grid.\n */\n\n// access n-th rotation of piece with o.rotations[n]\nexport const o = {\n  rotations: [\n    0b1100110000000000,\n    0b1100110000000000,\n    0b1100110000000000,\n    0b1100110000000000\n  ],\n  string: 'O',\n  color: 'rgb(255, 255, 0)'\n};\n\nexport const i = {\n  rotations: [\n    0b0100010001000100,\n    0b0000111100000000,\n    0b0010001000100010,\n    0b0000000011110000,\n  ],\n  string: 'I',\n  color: 'rgb(0, 231, 233)'\n};\n\nexport const t = {\n  rotations: [\n    0b0000111001000000,\n    0b0100110001000000,\n    0b0100111000000000,\n    0b0100011001000000\n  ],\n  string: 'T',\n  color: 'rgb(255, 0, 255)'\n};\n\nexport const l = {\n  rotations: [\n    0b0100010001100000,\n    0b0000111010000000,\n    0b1100010001000000,\n    0b0010111000000000\n  ],\n  string: 'L',\n  color: 'rgb(255, 128, 0)'\n};\n\nexport const j = {\n  rotations: [\n    0b0100010011000000,\n    0b1000111000000000,\n    0b0110010001000000,\n    0b0000111000100000\n  ],\n  string: 'J',\n  color: 'rgb(0, 0, 255)'\n};\n\nexport const s = {\n  rotations: [\n    0b0110110000000000,\n    0b0100011000100000,\n    0b0000011011000000,\n    0b1000110001000000\n  ],\n  string: 'S',\n  color: 'rgb(0, 255, 0)'\n};\n\nexport const z = {\n  rotations: [\n    0b1100011000000000,\n    0b0010011001000000,\n    0b0000110001100000,\n    0b0100110010000000\n  ],\n  string: 'Z',\n  color: 'rgb(255, 0, 0)'\n};\n\n// for battle tetris - the unclearable brick\nexport const brick = {\n  rotations: [\n    0b1000000000000000,\n    0b1000000000000000,\n    0b1000000000000000,\n    0b1000000000000000\n  ],\n  string: 'B',\n  color: 'gray'\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/tetrominos.js\n **/"],"sourceRoot":""}